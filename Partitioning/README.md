# Table Partitioning

à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£à¸ªà¸­à¸™à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š Table Partitioning à¹à¸¥à¸° Index Partitioning à¹ƒà¸™ SQL Server

## ğŸ“– à¸šà¸—à¸™à¸³

Table Partitioning à¹€à¸›à¹‡à¸™à¹€à¸—à¸„à¸™à¸´à¸„à¸—à¸µà¹ˆà¸Šà¹ˆà¸§à¸¢à¹à¸šà¹ˆà¸‡à¸•à¸²à¸£à¸²à¸‡à¸‚à¸™à¸²à¸”à¹ƒà¸«à¸à¹ˆà¸­à¸­à¸à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¹† (Partitions) à¸•à¸²à¸¡à¹€à¸à¸“à¸‘à¹Œà¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸” à¹€à¸Šà¹ˆà¸™ à¸•à¸²à¸¡à¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸£à¸·à¸­à¸Šà¹ˆà¸§à¸‡à¸„à¹ˆà¸² Partitioning à¸Šà¹ˆà¸§à¸¢à¹€à¸à¸´à¹ˆà¸¡à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸à¹ƒà¸™à¸«à¸¥à¸²à¸¢à¸”à¹‰à¸²à¸™:
- âš¡ **Query Performance**: Query à¹à¸„à¹ˆ Partitions à¸—à¸µà¹ˆà¹€à¸à¸µà¹ˆà¸¢à¸§à¸‚à¹‰à¸­à¸‡
- ğŸ—‘ï¸ **Fast Data Loading**: à¹€à¸à¸´à¹ˆà¸¡/à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰à¹€à¸£à¹‡à¸§à¸‚à¸¶à¹‰à¸™
- ğŸ”§ **Maintenance**: Rebuild Index à¹à¸„à¹ˆà¸šà¸²à¸‡ Partitions
- ğŸ“Š **Scalability**: à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‚à¸™à¸²à¸”à¹ƒà¸«à¸à¹ˆà¸‡à¹ˆà¸²à¸¢à¸‚à¸¶à¹‰à¸™

## âœ¨ à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¸«à¸¥à¸±à¸

- ğŸ¯ **Partition Function**: à¸à¸³à¸«à¸™à¸”à¹€à¸à¸“à¸‘à¹Œà¸à¸²à¸£à¹à¸šà¹ˆà¸‡
- ğŸ”¢ **Partition Scheme**: à¸à¸³à¸«à¸™à¸” Filegroup à¸—à¸µà¹ˆà¹€à¸à¹‡à¸šà¹à¸•à¹ˆà¸¥à¸° Partition
- ğŸ“ **Filegroup Management**: à¸ˆà¸±à¸”à¸à¸²à¸£ Storage à¹à¸¢à¸à¸à¸±à¸™à¸•à¸²à¸¡ Partitions
- ğŸ”„ **Partition Switching**: à¸¢à¹‰à¸²à¸¢à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸•à¸²à¸£à¸²à¸‡à¹„à¸”à¹‰à¹€à¸£à¹‡à¸§à¸¡à¸²à¸ (Instant)

## ğŸ“‹ à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š

- SQL Server 2016 à¸«à¸£à¸·à¸­à¹ƒà¸«à¸¡à¹ˆà¸à¸§à¹ˆà¸²
- AdventureWorks2022 Database
- à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸ˆà¸°à¹ƒà¸Šà¹‰à¸•à¸²à¸£à¸²à¸‡ `Sales.SalesOrderHeader`

## ğŸ—‚ï¸ à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¸›à¸£à¸°à¸à¸­à¸šà¸”à¹‰à¸§à¸¢

### 01-create-partition-function-and-scheme.sql
- à¸ªà¸£à¹‰à¸²à¸‡ Partition Function à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸šà¹ˆà¸‡à¸•à¸²à¸¡à¸›à¸µ
- à¸ªà¸£à¹‰à¸²à¸‡ Partition Scheme à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸³à¸«à¸™à¸” Filegroups
- à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Filegroups à¸«à¸¥à¸²à¸¢à¹„à¸Ÿà¸¥à¹Œ

### 02-create-partitioned-table.sql
- à¸ªà¸£à¹‰à¸²à¸‡à¸•à¸²à¸£à¸²à¸‡à¹à¸šà¸š Partitioned à¸•à¸²à¸¡ Partition Scheme
- à¹ƒà¸Šà¹‰à¸•à¸²à¸£à¸²à¸‡ Sales.SalesOrderHeader à¹€à¸›à¹‡à¸™à¸•à¹‰à¸™à¹à¸šà¸š

### 03-partition-existing-table.sql
- à¹à¸›à¸¥à¸‡à¸•à¸²à¸£à¸²à¸‡à¹€à¸”à¸´à¸¡à¸—à¸µà¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸›à¹‡à¸™ Partitioned Table
- à¹ƒà¸Šà¹‰ Partition Switching à¹€à¸à¸·à¹ˆà¸­à¸¢à¹‰à¸²à¸¢à¸‚à¹‰à¸­à¸¡à¸¹à¸¥

### 04-manage-partitions.sql
- à¹€à¸à¸´à¹ˆà¸¡ Partitions à¹ƒà¸«à¸¡à¹ˆ
- à¸¥à¸š/à¸£à¸§à¸¡ Partitions à¹€à¸à¹ˆà¸²
- Manage Boundary Values

### 05-partition-switching.sql
- à¸ªà¸¥à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ Partitions (Fast Load)
- à¹ƒà¸Šà¹‰ Staging Table à¸ªà¸³à¸«à¸£à¸±à¸š Loading à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- Archive à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹ˆà¸²

## ğŸ¯ Use Cases

### 1. Date-Based Partitioning
à¹à¸šà¹ˆà¸‡à¸•à¸²à¸¡à¸§à¸±à¸™à¸—à¸µà¹ˆ à¹€à¸Šà¹ˆà¸™ à¸•à¸²à¸¡à¹€à¸”à¸·à¸­à¸™à¸«à¸£à¸·à¸­à¸›à¸µ
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Sales à¹‚à¸”à¸¢à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™
- Transaction Logs à¸•à¸²à¸¡à¸§à¸±à¸™
- Audit Data à¸•à¸²à¸¡à¸›à¸µ

### 2. Range Partitioning
à¹à¸šà¹ˆà¸‡à¸•à¸²à¸¡à¸Šà¹ˆà¸§à¸‡à¸„à¹ˆà¸² à¹€à¸Šà¹ˆà¸™ ID à¸«à¸£à¸·à¸­ Categories
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹à¸šà¹ˆà¸‡à¸•à¸²à¸¡ Region
- Products à¹à¸šà¹ˆà¸‡à¸•à¸²à¸¡ Category

### 3. Staging and Archival
à¹ƒà¸Šà¹‰ Partition Switching à¸ªà¸³à¸«à¸£à¸±à¸š:
- Fast Loading à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ Staging Table
- Archive à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸à¹ˆà¸²à¸­à¸­à¸à¹„à¸›à¸¢à¸±à¸‡à¸•à¸²à¸£à¸²à¸‡ Archive

## âš ï¸ à¸‚à¹‰à¸­à¸„à¸§à¸£à¸£à¸°à¸§à¸±à¸‡

1. **Partition Key**: à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¸—à¸µà¹ˆà¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ Clustered Index
2. **Boundary Values**: à¸•à¸­à¸™à¹à¸£à¸à¸ˆà¸° Partition à¹ƒà¸«à¸¡à¹ˆà¹€à¸›à¹‡à¸™ LEFT/RIGHT-bound
3. **Filegroup**: à¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡ Filegroups à¹€à¸à¸µà¸¢à¸‡à¸à¸­
4. **Maintenance**: Plan à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£ Partitions à¹€à¸à¹ˆà¸²
5. **Query Optimization**: à¹ƒà¸Šà¹‰ WHERE Clause à¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸à¸±à¸š Partition Key

## ğŸ”§ Best Practices

### 1. à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸ Partition Key
- à¹ƒà¸Šà¹‰à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¸—à¸µà¹ˆ Query à¸šà¹ˆà¸­à¸¢
- Data Type à¸™à¹‰à¸­à¸¢ (à¹€à¸Šà¹ˆà¸™ DATE à¹à¸—à¸™ DATETIME2)
- Distributed à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¡à¹ˆà¸³à¹€à¸ªà¸¡à¸­

### 2. à¸ˆà¸³à¸™à¸§à¸™ Partitions
- **à¹à¸™à¸°à¸™à¸³**: 10-100 Partitions (à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 1000)
- Partition à¹€à¸¥à¹‡à¸à¹€à¸à¸´à¸™à¹„à¸› = à¹„à¸¡à¹ˆà¸¡à¸µà¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œ
- Partition à¹ƒà¸«à¸à¹ˆà¹€à¸à¸´à¸™à¹„à¸› = à¸ˆà¸±à¸”à¸à¸²à¸£à¸¢à¸²à¸

### 3. Filegroups
- à¸§à¸²à¸‡ Partitions à¹€à¸à¹ˆà¸²à¹à¸¥à¸°à¹ƒà¸«à¸¡à¹ˆà¸­à¸¢à¸¹à¹ˆà¸„à¸™à¸¥à¸° Filegroups
- à¹ƒà¸Šà¹‰ Filegroups à¹à¸¢à¸à¸ªà¸³à¸«à¸£à¸±à¸š Archive
- Consider Compression

### 4. Maintenance Strategy
- Merge Partitions à¹€à¸à¹ˆà¸²à¸—à¸¸à¸à¹„à¸•à¸£à¸¡à¸²à¸ª
- Sliding Window Pattern à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸›à¸£à¸°à¸ˆà¸³
- Archive à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆ > 2 à¸›à¸µ

## ğŸ“Š Sliding Window Pattern

à¸£à¸¹à¸›à¹à¸šà¸šà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸šà¸š Time-Series:

```
[Oldest] â† [Older] â† [Old] â† [Current] â† [Future]
   â†“
 Archived  Merged   Active  Sliding
```

1. à¹€à¸à¸´à¹ˆà¸¡ Partition à¹ƒà¸«à¸¡à¹ˆà¸ªà¸³à¸«à¸£à¸±à¸š Future
2. à¸¥à¸š Partition à¹€à¸à¹ˆà¸²à¸ªà¸¸à¸”
3. Merge Partitions à¹€à¸à¹ˆà¸²à¹† à¹€à¸‚à¹‰à¸²à¸”à¹‰à¸§à¸¢à¸à¸±à¸™

## ğŸ”— à¸¥à¸´à¸‡à¸à¹Œà¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡

- [Microsoft Documentation: Partitioned Tables and Indexes](https://docs.microsoft.com/en-us/sql/relational-databases/partitions/partitioned-tables-and-indexes)
- [SQL Server Table Partitioning Tutorial](https://www.sqlshack.com/implementing-sql-server-table-partitioning/)
- [SQL Server 2022 Partitioning Enhancements](https://docs.microsoft.com/en-us/sql/sql-server/what-s-new-in-sql-server-2022)

## ğŸ“ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸

- à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸Šà¹‰ AdventureWorks2022 Database
- à¸—à¸¸à¸à¹‚à¸„à¹‰à¸”à¸—à¸”à¸ªà¸­à¸šà¹à¸¥à¹‰à¸§à¸à¸±à¸š SQL Server 2016 - 2022
- à¹à¸™à¸°à¸™à¸³à¹ƒà¸«à¹‰à¸£à¸±à¸™à¸—à¸µà¸¥à¸°à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¹à¸¥à¸°à¸¨à¸¶à¸à¸©à¸² Output
- **à¸ªà¸³à¸„à¸±à¸**: à¸•à¹‰à¸­à¸‡ Backup Database à¸à¹ˆà¸­à¸™à¸£à¸±à¸™ Scripts à¸—à¸µà¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡

---
**à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸**: Partitioning à¹€à¸›à¹‡à¸™à¹€à¸—à¸„à¸™à¸´à¸„à¸‚à¸±à¹‰à¸™à¸ªà¸¹à¸‡ à¸„à¸§à¸£à¸—à¸³à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹ƒà¸«à¹‰à¸”à¸µà¸à¹ˆà¸­à¸™à¸™à¸³à¹„à¸›à¹ƒà¸Šà¹‰à¹ƒà¸™ Production

